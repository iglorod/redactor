(this.webpackJsonpredactor=this.webpackJsonpredactor||[]).push([[0],{121:function(e,t,n){e.exports={fontSizePicker:"FontSizePicker_fontSizePicker__3aAWg"}},122:function(e,t,n){e.exports={header:"Header_header__VI-pO"}},125:function(e,t,n){e.exports=n(301)},297:function(e,t,n){},298:function(e,t,n){},299:function(e,t,n){},300:function(e,t,n){},301:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(8),i=n.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=n(46),l=n(18),u=n(11),s=n(16),d=function(e,t){if(!e||!t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;var n=!0;for(var c in e)"text"!==c&&(n=e[c]===t[c]&&n);return n},x=function(e,t,n){var c=n,r=e[n].text.length;return e[n].text=e[n].text+e[t].text,e.splice(t,1),{updatedTextPieces:e,index:c,cursorPosition:r}},f=function(e,t,n){return d(e[t],e[n])?t>n?x(e,t,n):x(e,n,t):{updatedTextPieces:e,index:0,cursorPosition:0}},p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var c=t.reduce((function(e,n,c){return n?(c>0&&d(t[c-1],n)?e[e.length-1].text=e[e.length-1].text+n.text:e.push(n),e):e}),[]);return c},g=function(e,t,n,c){var r=e[t],o=e[t].text.split(""),i=o.splice(0,n[0]).join(""),a=o.splice(0,n[1]-n[0]).join(""),l=o.join(""),s=Object(u.a)({},r,{text:i}),d=Object(u.a)({},r,{text:a},c),x=Object(u.a)({},r,{text:l});return v(s,d,x)},v=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var c=t.reduce((function(e,t,n){return t&&void 0===t.text||t&&0!==t.text.length?(e.push(t),e):e}),[]);return c},b={textPieces:[{text:"Hi My lovely",fontSize:"16px",color:"#5300eb",backgroundColor:"#fad0c3"},{text:"little",fontSize:"32px",color:"#db3e00",backgroundColor:"#c1e1c5"},{},{text:"Ponny",fontSize:"14px",color:"#ffffff",backgroundColor:"#006b76"}],selectionRange:[0,0],pieceIndex:0},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TEXT":var n=Object(s.a)(e.textPieces);return n[t.pieceIndex].text=t.content,Object(u.a)({},e,{textPieces:Object(s.a)(n),selectionRange:[t.caretPosition,t.caretPosition],pieceIndex:t.pieceIndex});case"ADD_BREAK":var c=Object(s.a)(e.textPieces),r=t.pieceIndex+2,o=c[t.pieceIndex].text.split(""),i=o.splice(t.caretPosition,o.length-t.caretPosition);c[t.pieceIndex].text=o.join("");var a=Object(u.a)({},c[t.pieceIndex]);return a.text=i.join(""),c.splice(t.pieceIndex+1,0,{},a),0===c[t.pieceIndex].text.length&&c[t.pieceIndex-1]&&c[t.pieceIndex-1].text&&(c.splice(t.pieceIndex,1),r=t.pieceIndex+1),Object(u.a)({},e,{textPieces:Object(s.a)(c),selectionRange:[0,0],pieceIndex:r});case"REMOVE_BREAK":var l=Object(s.a)(e.textPieces),d=l[t.removeIndex];if(d&&0===Object.keys(d).length){l.splice(t.removeIndex,1),t.currentIndex>t.removeIndex&&(--t.currentIndex,--t.removeIndex);var x=f(l,t.currentIndex,t.removeIndex),v=x.updatedTextPieces,h=x.index,m=x.cursorPosition;return Object(u.a)({},e,{textPieces:Object(s.a)(v),selectionRange:[m,m],pieceIndex:h})}return e;case"SET_SELECTION":var E=t.range;return Array.isArray(E)||(E=[E,E]),Object(u.a)({},e,{selectionRange:E,pieceIndex:t.pieceIndex});case"SET_NEW_PROPERTY":var I=Object(s.a)(e.textPieces),O=g(I,t.pieceIndex,t.selectedRange,t.property);O=p.apply(void 0,[I[t.pieceIndex-1]].concat(Object(s.a)(O),[I[t.pieceIndex+1]]));var P=t.pieceIndex-1;return I.splice.apply(I,[P>=0?P:0,P>=0?3:2].concat(Object(s.a)(O))),Object(u.a)({},e,{textPieces:Object(s.a)(I),selectionRange:[0,0],pieceIndex:t.pieceIndex});default:return e}},m=(n(134),n(52)),E=n(124),I=n(118),O=n(306),P=n(307),k=(n(297),function(e){var t=r.a.createElement(I.GithubPicker,{triangle:"hide",onChangeComplete:e.handleChange});return r.a.createElement(O.a,{trigger:"focus",delay:100,rootCloseEvent:"click",placement:"bottom",overlay:r.a.createElement(P.a,null,r.a.createElement(P.a.Content,null,t))},r.a.createElement(m.a,{className:"color-picker-button",variant:"light"},e.label))}),j=n(308),S=n(55),y=function(e){return r.a.createElement(S.a.Item,{active:e.currFontSize===e.fontSize,onClick:e.changeFontSize},e.fontSize)},R=n(121),C=n.n(R),w=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{id:"dropdown-split-variants-light",variant:"light",title:"Font size: ".concat(e.fontSize),onClick:e.onClick,className:C.a.fontSizePicker},["12px","14px","16px","32px","48px","64px"].map((function(t){return r.a.createElement(y,{key:t,fontSize:t,currFontSize:e.fontSize,changeFontSize:e.changeFontSize.bind(void 0,t)})}))))},z=Object(l.b)((function(e){return{selectedRange:e.selectionRange,pieceIndex:e.pieceIndex}}),(function(e){return{setNewProperty:function(t,n,c){e(function(e,t,n){return{type:"SET_NEW_PROPERTY",selectedRange:e,pieceIndex:t,property:n}}(t,n,c))}}}))((function(e){var t=Object(c.useState)("12px"),n=Object(E.a)(t,2),o=n[0],i=n[1],a=function(t){e.selectedRange[0]!==e.selectedRange[1]&&e.setNewProperty(e.selectedRange,e.pieceIndex,{fontSize:t})};return r.a.createElement("div",null,r.a.createElement(k,{label:"Font color",handleChange:function(t){var n=t.hex;e.selectedRange[0]!==e.selectedRange[1]&&e.setNewProperty(e.selectedRange,e.pieceIndex,{color:n})}}),r.a.createElement(k,{label:"Background",handleChange:function(t){var n=t.hex;e.selectedRange[0]!==e.selectedRange[1]&&e.setNewProperty(e.selectedRange,e.pieceIndex,{backgroundColor:n})}}),r.a.createElement(w,{fontSize:o,changeFontSize:function(e){i(e),a(e)},onClick:a.bind(void 0,o)}))})),T=n(122),N=n.n(T),_=Object(l.b)((function(e){return{textPieces:e.textPieces}}))((function(e){return r.a.createElement("header",{className:N.a.header},r.a.createElement(z,null),r.a.createElement(m.a,{variant:"light",onClick:function(){console.log(function(e){var t=e.reduce((function(e,t,n){if(0===n)return[Object(u.a)({},t)];if(0===Object.keys(t).length)return e;var c=e[e.length-1];return d(c,t)?c.text=c.text+t.text:e.push(Object(u.a)({},t)),e}),[]);return JSON.stringify(t,null,2)}(e.textPieces))}},"Show JSON (in concole)"))})),B=function(){if(window.getSelection){var e=window.getSelection();return[e.anchorOffset,e.extentOffset]}var t=document.selection.createRange();return[t.anchorOffset,t.extentOffset]},A=Object(l.b)(null,(function(e){return{setSelection:function(t,n){e(function(e,t){return{type:"SET_SELECTION",pieceIndex:e,range:t}}(t,n))}}}))((function(e){var t=e.piece,n=Object(c.useRef)(null);if(Object(c.useEffect)((function(){null!==e.cursorPosition&&(n.current&&n.current.focus(),function(e,t){if(e&&!(e.length<t[1])&&!(t[0]<t[1])){var n=window.getSelection(),c=document.createRange();c.setStart(e,t[0]),c.setEnd(e,t[1]),c.collapse(!0),n.removeAllRanges(),n.addRange(c)}}(n.current?n.current.childNodes[0]:null,e.cursorPosition))}),[e.cursorPosition]),0===Object.keys(t).length)return r.a.createElement("br",null);var o={fontSize:t.fontSize,color:t.color,backgroundColor:t.backgroundColor};return r.a.createElement("span",{ref:n,style:o,className:"text-block",contentEditable:!0,suppressContentEditableWarning:!0,onSelect:function(){var t=B();t[0]<t[1]?e.setSelection(e.index,t):t[0]>t[1]&&e.setSelection(e.index,t.reverse())},onKeyDown:function(n){var c=B()[0];13===n.keyCode?(n.preventDefault(),e.addBreak(e.index,c)):8===n.keyCode&&0===c?(n.preventDefault(),e.removeBreak(e.index,e.index-1)):46===n.keyCode&&c===t.text.length&&(n.preventDefault(),e.removeBreak(e.index,e.index+1))},onInput:function(t){var n=t.target.textContent,c=B()[0];e.onChange(e.index,n,c)}},t.text)})),F=(n(298),Object(l.b)((function(e){return{textPieces:e.textPieces,caretPosition:e.selectionRange,pieceIndex:e.pieceIndex}}),(function(e){return{changeText:function(t,n,c){e(function(e,t,n){return{type:"CHANGE_TEXT",pieceIndex:e,content:t,caretPosition:n}}(t,n,c))},addTextBreak:function(t,n){e(function(e,t){return{type:"ADD_BREAK",pieceIndex:e,caretPosition:t}}(t,n))},removeTextBreak:function(t,n){e(function(e,t){return{type:"REMOVE_BREAK",currentIndex:e,removeIndex:t}}(t,n))}}}))((function(e){var t=e.changeText,n=e.addTextBreak,c=e.removeTextBreak,o=function(e,n,c){t(e,n,c)},i=function(e,t){n(e,t)},a=function(e,t){c(e,t)},l={index:e.pieceIndex,position:e.caretPosition};return r.a.createElement("div",{className:"area"},e.textPieces.map((function(e,t){return r.a.createElement(A,{key:t,piece:e,index:t,cursorPosition:t===l.index?l.position:null,addBreak:i,removeBreak:a,onChange:o})})))}))),D=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,null),r.a.createElement(F,null))};n(299);var W=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(D,null))},K=(n(300),Object(a.b)(h));i.a.render(r.a.createElement(l.a,{store:K},r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[125,1,2]]]);
//# sourceMappingURL=main.f74ce803.chunk.js.map